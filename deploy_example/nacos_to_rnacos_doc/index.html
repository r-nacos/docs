<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>R-Nacos | Hi，终于等到你</title>
    <meta name="description" content="r-nacos doc">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/docs/assets/style.HJ1O-hH8.css" as="style">
    <link rel="preload stylesheet" href="/docs/vp-icons.css" as="style">
    <script type="module" src="/docs/assets/chunks/metadata.84c131b4.js"></script>
    <script type="module" src="/docs/assets/app.IeJn98zn.js"></script>
    <link rel="preload" href="/docs/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/docs/assets/chunks/theme.B59CGqKO.js">
    <link rel="modulepreload" href="/docs/assets/chunks/framework.C8XEYcK3.js">
    <link rel="modulepreload" href="/docs/assets/deploy_example_nacos_to_rnacos_doc_index.md.C9C9MP_7.lean.js">
    <link rel="shortcut icon" href="/docs/logo.svg">
    <link rel="icon" href="/docs/logo.svg" type="image/svg+xml">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,shrink-to-fit=no">
    <meta name="keywords" content="r-nacos,nacos,rnacos">
    <script async src="https://hm.baidu.com/hm.js?afa135946ba7fb33d69bea1f370b905c"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/docs/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/docs/logo.svg" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>R-Nacos</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--[--><!--[--><div class="VPNavBarSearch search"><div id="docsearch"></div></div><!--]--><!--]--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/faq/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>常见问题</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/docs/change/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>更新日志</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://www.bestreven.top/rnacos/" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>控制台演示</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-6aa21345 data-v-88af2de4 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><span class="vpi-languages option-icon" data-v-cf11d7a2></span><!----><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><div class="items" data-v-88af2de4><p class="title" data-v-88af2de4>简体中文</p><!--[--><div class="VPMenuLink" data-v-88af2de4 data-v-35975db6><a class="VPLink link" href="/docs/en/deploy_example/nacos_to_rnacos_doc/" data-v-35975db6><!--[--><span data-v-35975db6>English</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/r-nacos/r-nacos" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><div class="group translations" data-v-bb2aa2f0><p class="trans-title" data-v-bb2aa2f0>简体中文</p><!--[--><div class="VPMenuLink" data-v-bb2aa2f0 data-v-35975db6><a class="VPLink link" href="/docs/en/deploy_example/nacos_to_rnacos_doc/" data-v-35975db6><!--[--><span data-v-35975db6>English</span><!--]--></a></div><!--]--></div><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>深浅模式</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/r-nacos/r-nacos" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/intro/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>简介</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/quick_started/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>快速开始</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/cluster_deploy/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>集群部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/env_config/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>运行参数说明</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/performance/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>性能与容量说明</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/health/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>服务健康检测、探活</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/backup/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>数据备件与迁移</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/version_describe/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>版本说明</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/architecture/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>架构</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/faq/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>常见问题</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>部署样例</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/deploy_example/linux_deploy/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>单机部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/deploy_example/linux_systemd_deploy/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>使用systemd部署r-nacos</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/deploy_example/docker_cluster_deploy/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>集群部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/docs/deploy_example/nacos_to_rnacos_doc/" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>如何平稳地从nacos迁移到r-nacos？</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--[--><!--[--><!--[--><!--]--><!--]--><!--]--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>目录</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--[--><!--[--><div class="word"><p><span>🔥更新：2024-12-12</span><span>📝字数: 0 字</span><span>⏱时长: 0 分钟</span></p></div><!--[--><h2 id="贡献者">贡献者 <a class="header-anchor" href="#贡献者" aria-label="Permalink to &#39;贡献者&#39;"></a></h2><div class="vp-nolebase-git-changelog vp-nolebase-git-changelog-contributors vp-nolebase-git-changelog-contributors-container vp-nolebase-git-changelog-contributors-list" flex flex-wrap gap-4 pt-2><!--[--><!--[--><div class="flex items-center gap-2"><img src="https://gravatar.com/avatar/8c85feabf9cd3112e0ab601c7a6157309efded55a8b45860a3a2c5e33209b12d?d=retro" alt="The avatar of contributor named as heqingpan" class="h-8 w-8 rounded-full"> heqingpan</div><!--]--><!--[--><a href="https://github.com/Aurorxa" class="no-icon flex items-center gap-2"><img src="https://github.com/Aurorxa.png" alt="The avatar of contributor named as 许大仙" class="h-8 w-8 rounded-full"> 许大仙</a><!--]--><!--]--></div><!--]--><!--[--><h2 id="页面历史" data-v-b299e998>页面历史 <a class="header-anchor" href="#页面历史" aria-label="Permalink to &#39;页面历史&#39;" data-v-b299e998></a></h2><div class="bg-$vp-custom-block-details-bg vp-nolebase-git-changelog vp-nolebase-git-changelog-history vp-nolebase-git-changelog-history-list vp-nolebase-git-changelog-history-container" rounded-lg p-4 data-v-b299e998><label cursor-pointer data-v-b299e998><div class="vp-nolebase-git-changelog-title flex select-none items-center justify-between" transition="color ease-in-out" text="&lt;sm:xs" duration-200 data-v-b299e998><span class="vp-nolebase-git-changelog-last-edited-title inline-flex items-center gap-3" data-v-b299e998><div class="i-octicon:history-16" data-v-b299e998></div><span data-v-b299e998>最后编辑于 大约 2 个月前</span></span><div class="i-octicon:sort-desc-16" ml-auto mr-4 cursor-pointer data-v-b299e998></div><span class="vp-nolebase-git-changelog-view-full-history-title inline-flex cursor-pointer items-center gap-3" data-v-b299e998><span class="&lt;sm:hidden" data-v-b299e998>查看完整历史</span><svg class="rotate-0 i-octicon:chevron-down-16" transition="transform ease-in-out" duration-200 data-v-b299e998></svg></span></div></label><div style="display:none;" class="grid grid-cols-[30px_auto] mt-3 gap-1.5 children:my-auto -ml-1.5" text="&lt;sm:xs" data-v-b299e998><!--[--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-babd0443></div><div flex gap-1 align-baseline data-v-babd0443><a href="https://github.com/r-nacos/docs/commit/dc87bf9307d28edc1076d52e83979b91de7f524e" target="_blank" class="no-icon" data-v-babd0443><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-babd0443>dc87bf9</code></a><span data-v-babd0443>-</span><span data-v-babd0443><span class="text-sm &lt;sm:text-xs" data-v-babd0443>多语言</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-babd0443></div><div flex gap-1 align-baseline data-v-babd0443><a href="https://github.com/r-nacos/docs/commit/a2c806e48df4446778903e7cbf54681342e5e4e8" target="_blank" class="no-icon" data-v-babd0443><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-babd0443>a2c806e</code></a><span data-v-babd0443>-</span><span data-v-babd0443><span class="text-sm &lt;sm:text-xs" data-v-babd0443>update nacos_to_rnacos_doc nginx conf</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-babd0443></div><div flex gap-1 align-baseline data-v-babd0443><a href="https://github.com/r-nacos/docs/commit/108635737a0edad53f685cc573b9a6601bb4c9c2" target="_blank" class="no-icon" data-v-babd0443><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-babd0443>1086357</code></a><span data-v-babd0443>-</span><span data-v-babd0443><span class="text-sm &lt;sm:text-xs" data-v-babd0443>fix nacos_to_rnacos_doc nginx http header</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-babd0443></div><div flex gap-1 align-baseline data-v-babd0443><a href="https://github.com/r-nacos/docs/commit/8cd409b086fe83ef515a4f1d5c2dec28748eea66" target="_blank" class="no-icon" data-v-babd0443><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-babd0443>8cd409b</code></a><span data-v-babd0443>-</span><span data-v-babd0443><span class="text-sm &lt;sm:text-xs" data-v-babd0443>fix nacos_to_rnacos_doc nginx grpc proxy path</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-babd0443></div><div flex gap-1 align-baseline data-v-babd0443><a href="https://github.com/r-nacos/docs/commit/bb9014b9a92913b1fd46bce9ce381ab64532acf1" target="_blank" class="no-icon" data-v-babd0443><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-babd0443>bb9014b</code></a><span data-v-babd0443>-</span><span data-v-babd0443><span class="text-sm &lt;sm:text-xs" data-v-babd0443>修改样式</span><!----><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-babd0443></div><div flex gap-1 align-baseline data-v-babd0443><a href="https://github.com/r-nacos/docs/commit/e91246d8a68d78641ca1efb199045e5f0db86ab7" target="_blank" class="no-icon" data-v-babd0443><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-babd0443>e91246d</code></a><span data-v-babd0443>-</span><span data-v-babd0443><span class="text-sm &lt;sm:text-xs" data-v-babd0443>add nacos_to_rnacos_doc</span><!----><!----></span></div><!--]--><!--]--><!--]--></div></div><!--]--><!--]--><!--]--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _docs_deploy_example_nacos_to_rnacos_doc_" data-v-39a288b8><div><h2 id="_1-引言" tabindex="-1">1. 引言 <a class="header-anchor" href="#_1-引言" aria-label="Permalink to &quot;1. 引言&quot;">​</a></h2><p>很多同学了解 r-nacos 特性后最开始只将 r-nacos 用于开发测试环境。</p><p>经过一段时间的使用后，部分同学有打算生产环境也从 nacos 迁移到r-nacos 。</p><p>一些之前使用 nacos 服务的同学了解 r-nacos 后打算从 nacos 迁移到 r-nacos。</p><p>那么如何平衡地从 nacos 迁移到 r-nacos 呢？</p><div class="note custom-block github-alert"><p class="custom-block-title">提醒</p><p></p><p><a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/nacos-group/r-nacos" target="_blank" rel="noreferrer" data-v-e59aff03><!--[-->r-nacos<!--]--><!----></a> 简介：</p><ul><li><p>① r-nacos 是一个用 rust 实现的 nacos 服务。相较于 java nacos 来说，是一个提供相同功能，启动更快、占用系统资源更小（初始内存小于 10 M）、性能更高、运行更稳定的服务。</p></li><li><p>② r-nacos 设计上完全兼容最新版本 nacos 面向 client sdk 的协议（包含 1.x 的 http OpenApi，和 2.x 的 grpc 协议）, 支持使用 nacos 服务的应用平迁到 r-nacos 。</p></li></ul></div><h2 id="_2-迁移计划" tabindex="-1">2. 迁移计划 <a class="header-anchor" href="#_2-迁移计划" aria-label="Permalink to &quot;2. 迁移计划&quot;">​</a></h2><h3 id="_2-1-待迁移内容分析" tabindex="-1">2.1 待迁移内容分析 <a class="header-anchor" href="#_2-1-待迁移内容分析" aria-label="Permalink to &quot;2.1 待迁移内容分析&quot;">​</a></h3><p>迁移的目标已明确，在设计迁移计划前，我们需要先分析待迁移的数据。</p><p><img src="/docs/assets/20240718235044.BJpPydPG.png" alt="" loading="lazy"></p><p>从nacos迁移到r-nacos主要涉及4类数据：</p><ol><li>nacos鉴权用户数据</li><li>命名空间数据</li><li>配置数据</li><li>服务实例数据</li></ol><p>nacos用户数据、命名空间数据与配置数据是持久化数据，需要事先完成设置与迁移。 服务实例数据是动态数据，切换后应该会自动注册，不需要事先迁移。</p><h3 id="_2-2-迁移阶段与步骤" tabindex="-1">2.2 迁移阶段与步骤 <a class="header-anchor" href="#_2-2-迁移阶段与步骤" aria-label="Permalink to &quot;2.2 迁移阶段与步骤&quot;">​</a></h3><p>我们可以把迁移分为3个阶段：</p><ol><li>迁移前准备阶段；</li><li>迁移阶段；</li><li>迁移后收尾阶段；</li></ol><p>一、迁移前准备</p><p><img src="/docs/assets/20240719000940.AaqeeIsA.png" alt="" loading="lazy"></p><ol><li>部署r-nacos,用于迁移前做数据迁移与数据录入。（如果nacos与r-nacos在同一台机器，可以用临时端口号启动r-nacos，等迁移时再更新端口号重启）</li><li>在r-nacos控制台录入应用依赖的用户信息，完成用户数据初始化。</li><li>在r-nacos控制台录入命名空间数据；</li><li>从nacos控制台按命名空间全量导出数据（每个命名空间会导出一个文件）；然后分别把这部分配置数据通过r-nacos控制台导入对应命名空间中，完成配置数据迁移。</li></ol><p>二、迁移中</p><p>数据迁移完成后即可开始切流迁移。</p><p><img src="/docs/assets/20240719002254.u4Gy80V3.png" alt="" loading="lazy"></p><p>把应用请求流量切到r-nacos中，这一步不同的场景需要用不同的处理方式：</p><div class="note custom-block github-alert"><p class="custom-block-title">提醒</p><p></p><ul><li>① 应用直接请求 nacos 服务场景：r-nacos 需要和 nacos 在同一个机器替换它；需要先关闭 nacos，再把 r-nacos 的端口改成原 nacos 端口启动，完成切换。</li><li>② 应用请求 nginx 后反向代理到 nacos 场景：更新 nginx 配置，把 nacos 反向代理地址更新为 r-nacos 地址，然后重新增加配置完成切换。</li></ul></div><p>切流迁移完成后，注意观察应用与r-nacos的表现是否符合预期。</p><div class="caution custom-block github-alert"><p class="custom-block-title">注意</p><p></p><p>就算目标是要开启鉴权，这个阶段 r-naocs 也不要启接口鉴权 (<code>RNACOS_ENABLE_OPEN_API_AUTH=false</code>)，以防应用使用原 nacos 分配旧 token 请求被拦截。</p></div><p>三、迁移后收尾</p><p><img src="/docs/assets/20240719005524.LT0QBIL-.png" alt="" loading="lazy"></p><p>完成迁移稳定运行一小段时间后，可以将nacos移除，只保留r-nacos。</p><p>如果需要对接口开启鉴权，则走以下操作：</p><div class="note custom-block github-alert"><p class="custom-block-title">提醒</p><p></p><ul><li>① 等应用旧 token 都过期(默认过期时间是 5 小时)都重新从 r-nacos 获取新 token 之后，再开启接口鉴权配置重启 r-nacos （r-nacos 可以秒级重启，应用几乎无感）。</li><li>② 也可以分批重启应用强行其使用 r-nacos token，之后再开启接口鉴权配置重启 r-nacos 。</li></ul></div><p>至此完成从nacos迁移到r-nacos</p><h2 id="_3-迁移案例" tabindex="-1">3. 迁移案例 <a class="header-anchor" href="#_3-迁移案例" aria-label="Permalink to &quot;3. 迁移案例&quot;">​</a></h2><p>前面讲的是迁移操作步骤可能比较抽象，这里再补充两个具体迁移场景案例让读者更有体感。</p><h3 id="_3-1-应用服务直链单节点nacos的场景迁移方案" tabindex="-1">3.1 应用服务直链单节点nacos的场景迁移方案 <a class="header-anchor" href="#_3-1-应用服务直链单节点nacos的场景迁移方案" aria-label="Permalink to &quot;3.1 应用服务直链单节点nacos的场景迁移方案&quot;">​</a></h3><p>部署图：</p><p><img src="/docs/assets/20240719090037.CM9xjR00.png" alt="" loading="lazy"></p><p>nacos持久化内容:</p><p><img src="/docs/assets/20240721224800.B5Mb9MBG.png" alt="" loading="lazy"></p><div class="note custom-block github-alert"><p class="custom-block-title">提醒</p><p></p><p>nacos 使用情况：</p><ul><li>① 在 10.0.24.9 部署一台 nacos ，使用默认端口号 8848，8948 提供服务。</li><li>② nacos 上设置两个命名空间 pre、prod 分别对预发、生产环境提供服务。</li><li>③ 有 3 个应用，每个应用 2 个实例使用 nacos 服务； 总共两套环境，其中一套环境共有 3 个配置文件，3 个服务，6 个实例。</li><li>④ 应用使用的用户名：<code>xxx_app_id</code> ,密码: <code>a07a6deb5e56</code></li></ul></div><p>目标：在同一台机器中部署r-nacos替换nacos提供服务，使用<a class="VPNolebaseInlinePreviewLink" relative href="https://r-nacos.github.io/docs/notes/deploy_example/linux_systemd_deploy/" target="_blank" rel="noreferrer" data-v-e59aff03><!--[-->systemd方式部署<!--]--><!----></a></p><h4 id="_3-1-1-迁移步骤——迁移前" tabindex="-1">3.1.1 迁移步骤——迁移前 <a class="header-anchor" href="#_3-1-1-迁移步骤——迁移前" aria-label="Permalink to &quot;3.1.1 迁移步骤——迁移前&quot;">​</a></h4><p><strong>步骤1</strong> 、 在10.0.24.9使用临时端口8858部署r-nacos。 这里假设使用linux systemd方式部署。具体部署方式参考r-nacos说明文档，这里不展开。 关键配置项如下：</p><div class="language-properties vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># r-nacos监听http端口，这里使用临时端口8858，后面切流时调整回来</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RNACOS_HTTP_PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=8858</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># r-nacos监听grpc端口,grpc端口这里不配置，默认值：HTTP端口+1000</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># RNACOS_GRPC_PORT=9858</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># r-nacos独立控制台端口,这个没有端口冲突，可以直接使用正式端口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RNACOS_HTTP_CONSOLE_PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=10848</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RNACOS_ENABLE_OPEN_API_AUTH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>注：如果是docker启动方式，配置端口不用改，只需改对应对外映射的端口号即可</p><p><strong>步骤2</strong> 、初始化用户信息 访问<code>http://10.0.24.9:10848/rnacos/</code>进入控制台。 增加应用依赖用户，用户名：<code>xxx_app_id</code> ,密码: `a07a6deb5e56</p><p><img src="/docs/assets/20240721225717.BLwqj9Zy.png" alt="" loading="lazy"></p><p><strong>步骤3</strong>、初始化命名空间</p><p>初始化命名空间 pre、prod</p><p><img src="/docs/assets/20240721225844.Dr5K9ZDj.png" alt="" loading="lazy"></p><p><strong>步骤4</strong>、迁移配置信息</p><ol><li>从nacos导出配置</li></ol><p><img src="/docs/assets/20240721230843.BD3JDO48.png" alt="" loading="lazy"></p><p>分别导出pre、prod命名空间下的配置</p><p><img src="/docs/assets/20240721230943.C2Bk9i5X.png" alt="" loading="lazy"></p><p>导出的文件名格式为：<code>nacos_config_export_20240721230938.zip</code></p><p>注意：每次导出后记得改下文件名增加命名空间标记，以防导入时选错文件。</p><ol start="2"><li>把配置导入r-nacos 分别把上一步nacos导出的配置文件包导出到r-nacos pre、prod命名空间下的配置。</li></ol><p>a) 进入r-nacos控制台-&gt;配置列表页,选择对应命名空间</p><p><img src="/docs/assets/20240721231711.BL7lZurI.png" alt="" loading="lazy"></p><p>b) 上传导入配置文件</p><p><img src="/docs/assets/20240721231944.DaFNMvqj.png" alt="" loading="lazy"> 导入后： <img src="/docs/assets/20240721232033.Z_xiU6nU.png" alt="" loading="lazy"></p><p>上面图中操作的是pre命名空间，prod命名空间也操作一遍，这里不展开。</p><h4 id="_3-1-2-迁移步骤——迁移中" tabindex="-1">3.1.2 迁移步骤——迁移中 <a class="header-anchor" href="#_3-1-2-迁移步骤——迁移中" aria-label="Permalink to &quot;3.1.2 迁移步骤——迁移中&quot;">​</a></h4><p><strong>步骤5</strong>、 完成数据初始化后关闭r-nacos，先把临时端口更新正式端口，方便后面可以直接启动r-nacos。</p><p>关闭r-nacos服务</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>systemctl stop rnacos</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>关键配置项如下：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>properties</span></span>
<span class="line"><span># r-nacos监听http端口</span></span>
<span class="line"><span>RNACOS_HTTP_PORT=8848</span></span>
<span class="line"><span># r-nacos监听grpc端口,grpc端口这里不配置，默认值：HTTP端口+1000</span></span>
<span class="line"><span># RNACOS_GRPC_PORT=9848</span></span>
<span class="line"><span># r-nacos独立控制台端口</span></span>
<span class="line"><span>RNACOS_HTTP_CONSOLE_PORT=10848</span></span>
<span class="line"><span># 切换过程中不开启接口鉴权</span></span>
<span class="line"><span>RNACOS_ENABLE_OPEN_API_AUTH=false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>步骤6</strong>、关闭nacos</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 切换到nacos目录，执行以下命名关闭nacos</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./bin/shutdown.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>步骤7</strong>、启动r-nacos</p><p>配置信息在关闭nacos前已准备好，直接启动r-nacos服务：</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rnacos</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="_3-1-3-迁移步骤——迁移后" tabindex="-1">3.1.3 迁移步骤——迁移后 <a class="header-anchor" href="#_3-1-3-迁移步骤——迁移后" aria-label="Permalink to &quot;3.1.3 迁移步骤——迁移后&quot;">​</a></h4><p><strong>步骤8</strong>、切流完成，观察应用与r-nacos确认其是否正常工作。</p><p>应用服务可通过上游应用页面访问看看是否正常。 r-nacos可能通过监控页面查询其是否被应用访问。</p><p><img src="/docs/assets/20240722075241.DkCwAQuX.png" alt="" loading="lazy"></p><p><strong>步骤9</strong>、开启r-nacos接口鉴权 （可选）</p><p>切流完成后过5个小时之后，开启r-nacos接口鉴权。</p><p>关键配置项如下：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>properties</span></span>
<span class="line"><span># r-nacos监听http端口</span></span>
<span class="line"><span>RNACOS_HTTP_PORT=8848</span></span>
<span class="line"><span># r-nacos监听grpc端口,grpc端口这里不配置，默认值：HTTP端口+1000</span></span>
<span class="line"><span># RNACOS_GRPC_PORT=9848</span></span>
<span class="line"><span># r-nacos独立控制台端口</span></span>
<span class="line"><span>RNACOS_HTTP_CONSOLE_PORT=10848</span></span>
<span class="line"><span># 开启接口鉴权</span></span>
<span class="line"><span>RNACOS_ENABLE_OPEN_API_AUTH=true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>重启r-nacos服务:</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rnacos</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>至此，完成从nacos到r-nacos的迁移</p><h3 id="_3-2-应用服务通过nginx链接nacos场景迁移方案" tabindex="-1">3.2 应用服务通过nginx链接nacos场景迁移方案 <a class="header-anchor" href="#_3-2-应用服务通过nginx链接nacos场景迁移方案" aria-label="Permalink to &quot;3.2 应用服务通过nginx链接nacos场景迁移方案&quot;">​</a></h3><p>部署图：</p><p><img src="/docs/assets/20240722005450.DJVb2n4-.png" alt="" loading="lazy"></p><p>nacos内容和前一个场景一样，部署时中间多用了nginx代理提供服务。</p><p>通过nginx链接nacos，那么切换时只需要把nginx配置中原nacos地址切换为r-naocs地址，然后通过 <code>nginx -s reload</code> 重新加载配置规则即可完成切流。</p><h4 id="_3-2-1-迁移步骤——迁移前" tabindex="-1">3.2.1 迁移步骤——迁移前 <a class="header-anchor" href="#_3-2-1-迁移步骤——迁移前" aria-label="Permalink to &quot;3.2.1 迁移步骤——迁移前&quot;">​</a></h4><p>步骤和前一个场景第1、2、3、4步一致，这里不展开。</p><h4 id="_3-2-2-迁移步骤——迁移中" tabindex="-1">3.2.2 迁移步骤——迁移中 <a class="header-anchor" href="#_3-2-2-迁移步骤——迁移中" aria-label="Permalink to &quot;3.2.2 迁移步骤——迁移中&quot;">​</a></h4><p><strong>步骤5</strong>、更新nginx配置，把原nacos地址切换为r-naocs地址。</p><p>原nginx配置</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http {</span></span>
<span class="line"><span>    # nacos http , 走http反向代理</span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span>        listen       8848;</span></span>
<span class="line"><span>        listen  [::]:8848;</span></span>
<span class="line"><span>        server_name  localhost;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        location /nacos {</span></span>
<span class="line"><span>            proxy_pass http://10.0.24.9:8848;</span></span>
<span class="line"><span>            proxy_set_header Host $proxy_host;</span></span>
<span class="line"><span>            proxy_set_header  Connection &quot;&quot;;</span></span>
<span class="line"><span>            proxy_http_version  1.1;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>stream {</span></span>
<span class="line"><span>    # nacos grpc , 走tcp反向代理</span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span>        listen       9848;</span></span>
<span class="line"><span>        proxy_pass http://10.0.24.9:9848;</span></span>
<span class="line"><span>        proxy_connect_timeout 5s;</span></span>
<span class="line"><span>        proxy_timeout 20s;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>更新后的nginx配置</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>http {</span></span>
<span class="line"><span>    # nacos http , 走http反向代理</span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span>        listen       8848;</span></span>
<span class="line"><span>        listen  [::]:8848;</span></span>
<span class="line"><span>        server_name  localhost;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        location /nacos {</span></span>
<span class="line"><span>            proxy_pass http://10.0.24.9:8858;</span></span>
<span class="line"><span>            proxy_set_header Host $proxy_host;</span></span>
<span class="line"><span>            proxy_set_header  Connection &quot;&quot;;</span></span>
<span class="line"><span>            proxy_http_version  1.1;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>stream {</span></span>
<span class="line"><span>    # nacos grpc , 走tcp反向代理</span></span>
<span class="line"><span>    server {</span></span>
<span class="line"><span>        listen       9848;</span></span>
<span class="line"><span>        proxy_pass http://10.0.24.9:9858;</span></span>
<span class="line"><span>        proxy_connect_timeout 5s;</span></span>
<span class="line"><span>        proxy_timeout 20s;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>执行<code>nginx -s reload</code> 重新加载配置规则即可完成切流。</p><p>切换后：</p><p><img src="/docs/assets/20240722075815.CBFoBxfI.png" alt="" loading="lazy"></p><h4 id="_3-2-3-迁移步骤——迁移后" tabindex="-1">3.2.3 迁移步骤——迁移后 <a class="header-anchor" href="#_3-2-3-迁移步骤——迁移后" aria-label="Permalink to &quot;3.2.3 迁移步骤——迁移后&quot;">​</a></h4><p>步骤和前一个场景第8、9步一致，这里不展开。</p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>对于nacos迁移到r-nacos，分析待迁移数据项与划分好迁移各个阶段需要做的事项，可以设计出合适的迁移方案。</p><p>迁移可分在迁移前、迁移中、迁移后三个阶段，本文结合样例场景给出了较具体操作步骤。</p><p>如果上面的案例和自己的实际情况一致，可以考虑应用请求nacos前加一层nginx反向代理，之后再按案例2迁移即可。</p><hr><p>时间: 2024-07-22</p><p>作者: <a class="VPNolebaseInlinePreviewLink" relative href="https://github.com/heqingpan" target="_blank" rel="noreferrer" data-v-e59aff03><!--[-->heqingpan<!--]--><!----></a></p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--[--><!--[--><!--[--><div style="" class="vitepress-backTop-main" title="返回顶部" data-v-2a6be4fb><svg t="1720595052079" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4279" width="200" height="200" data-v-2a6be4fb><path d="M752.736 431.063C757.159 140.575 520.41 8.97 504.518 0.41V0l-0.45 0.205-0.41-0.205v0.41c-15.934 8.56-252.723 140.165-248.259 430.653-48.21 31.457-98.713 87.368-90.685 184.074 8.028 96.666 101.007 160.768 136.601 157.287 35.595-3.482 25.232-30.31 25.232-30.31l12.206-50.095s52.47 80.569 69.304 80.528c15.114-1.23 87-0.123 95.6 0h0.82c8.602-0.123 80.486-1.23 95.6 0 16.794 0 69.305-80.528 69.305-80.528l12.165 50.094s-10.322 26.83 25.272 30.31c35.595 3.482 128.574-60.62 136.602-157.286 8.028-96.665-42.475-152.617-90.685-184.074z m-248.669-4.26c-6.758-0.123-94.781-3.359-102.891-107.192 2.95-98.714 95.97-107.438 102.891-107.93 6.964 0.492 99.943 9.216 102.892 107.93-8.11 103.833-96.174 107.07-102.892 107.192z m-52.019 500.531c0 11.838-9.42 21.382-21.012 21.382a21.217 21.217 0 0 1-21.054-21.34V821.74c0-11.797 9.421-21.382 21.054-21.382 11.591 0 21.012 9.585 21.012 21.382v105.635z m77.333 57.222a21.504 21.504 0 0 1-21.34 21.626 21.504 21.504 0 0 1-21.34-21.626V827.474c0-11.96 9.543-21.668 21.299-21.668 11.796 0 21.38 9.708 21.38 21.668v157.082z m71.147-82.043c0 11.796-9.42 21.34-21.053 21.34a21.217 21.217 0 0 1-21.013-21.34v-75.367c0-11.755 9.421-21.299 21.013-21.299 11.632 0 21.053 9.544 21.053 21.3v75.366z" fill="#FFF" p-id="4280" data-v-2a6be4fb></path></svg></div><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/r-nacos/docs/edit/master/docs/zh/deploy_example/nacos_to_rnacos_doc/index.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> 在 GitHub 编辑本页<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>上次更新: <time datetime="2024-12-12T01:56:15.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/docs/deploy_example/docker_cluster_deploy/" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>上一篇</span><span class="title" data-v-e257564d>集群部署</span><!--]--></a></div><div class="pager" data-v-e257564d><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2025 R-Nacos</p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>